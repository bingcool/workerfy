<?php
namespace Workerfy\Tests\Reboot;

class Worker extends \Workerfy\AbstractProcess {

    public function run() {

        // 模拟处理业务
        var_dump("3s 后子进程开始 reboot start");
        sleep(3);
        $this->reboot(); //可以观察到子进程pid在变化

    }

    public function onShutDown()
    {
        parent::onShutDown(); // TODO: Change the autogenerated stub
        var_dump("子进程 shutdown--".\Co::getCid());
    }

//    public function __destruct()
//    {
//        var_dump("destruct");
//    }
}